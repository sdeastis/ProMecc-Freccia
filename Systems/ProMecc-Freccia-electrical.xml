<?xml version="1.0"?>
 
<!-- 12 Volt electrical system for Freccia -->

<PropertyList>

  <!-- Supplier list -->

  <supplier>
    <name>Battery</name>
    <prop>/systems/electrical/suppliers/battery[0]</prop>
    <kind>battery</kind>
    <volts>12</volts> 
    <amps>60</amps>   
  </supplier>

  <supplier>
    <name>Alternator</name>
    <prop>/systems/electrical/suppliers/alternator[0]</prop>
    <kind>alternator</kind>
    <rpm-source>/engines/engine[0]/rpm</rpm-source>
    <volts>12</volts> 
    <amps>62.5</amps>  
  </supplier>

  <!-- Bus list -->

  <bus>
    <name>Master Bus</name>
    <prop>/systems/electrical/outputs/bus-[0]</prop>
  </bus>

  <!-- Generic Outputs -->
  <output>
    <name>Starter Power</name>
    <prop>/systems/electrical/outputs/starter[0]</prop>
  </output>

  <output>
    <name>Fuel Pump Power</name>
    <prop>/systems/electrical/outputs/fuel-pump</prop>
  </output>

  <output>
    <name>Flaps Power</name>
    <prop>/systems/electrical/outputs/flaps</prop>
  </output>

  <!-- connect in power sources -->
  <connector>
    <input>Alternator</input>
    <output>Master Bus</output>
    <switch>
      <prop>/controls/engines/engine[0]/master-alt</prop>
    </switch>
  </connector>

  <connector>
    <input>Battery</input>
    <output>Master Bus</output>
    <switch>
      <prop>/controls/engines/engine[0]/master-bat</prop>
    </switch>
  </connector>
  
  <!-- connect starter output -->

  <connector>
    <input>Master Bus</input>
    <output>Starter Power</output>
    <switch>
      <prop>/controls/engines/engine[0]/starter</prop>
      <initial-state>off</initial-state>
    </switch>
  </connector>

  <!-- connect master bus outputs -->

  <connector>
    <input>Master Bus</input>
    <output>Fuel Pump Power</output>
    <switch>
      <prop>/controls/engines/engine[0]/fuel-pump</prop>
    </switch>
  </connector>

  <connector>
    <input>Master Bus</input>
    <output>Flaps Power</output>
    <switch>
      <prop>/controls/circuit-breakers/flaps</prop>
    </switch>
  </connector>

  <connector>
    <input>Master Bus</input>
    <output>Trim Power</output>
    <switch>
      <prop>/controls/circuit-breakers/trim</prop>
    </switch>
  </connector>

  <connector>
    <input>Master Bus</input>
    <output>Alternator Field</output>
    <switch>
      <prop>/controls/circuit-breakers/alternator-field</prop>
    </switch>
  </connector>

    <filter>
        <type>gain</type>
        <gain>100.0</gain>
        <input>
            <property>/systems/electrical/battery-charge-percent</property> <!-- this property ranges from 0.0 to 1.0 despite its name -->
        </input>
        <output>
            <property>/systems/electrical/battery-charge-percent-100</property>
        </output>
    </filter>
    
    <logic>
        <name>Low Voltage LED</name>
        <input>
            <and>
                <greater-than>
                    <property>systems/electrical/volts</property>
                    <value>0.0</value>
                </greater-than>
                <less-than>
                    <property>systems/electrical/amps</property>
                    <value>0.0</value>
                </less-than>
                
            </and>
        </input>
        <output>
            <property>/instrumentation/low-voltage-led</property>
        </output>
    </logic>
    
</PropertyList>
